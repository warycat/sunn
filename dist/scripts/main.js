function hexToRgb(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null}paper.install(window);var tick=0,SUNN=function(){var a=function(){return moment().add(50*tick,"second")},b=6,c=28,d=7,e=18,f=768,g=1024,h=4,i=150,j=10,k=new Point(f/2,g/2),l=["#ff0000","#ff2200","#ff4400","#ff6600","#ff8800","#ffaa00","#ffcc00","#ffee00","#ffff22","#ffff44","#ffff66","#ffffff","#ffffff","#ffffff","#ffffff","#ffff22","#ffee00","#ffcc00","#ffaa00","#ff8800","#ff6600","#ff4400","#ff2200","#ff0000"],m=["#ff0000","#ff2200","#ff4400","#ff6600","#ff8800","#ffaa00","#ffcc00","#ffee00","#ffff22","#ffff44","#ffff66","#ffffff","#ffffff","#ffffff","#ffffff","#ffff22","#ffee00","#ffcc00","#ffaa00","#ff8800","#ff6600","#ff4400","#ff2200","#ff0000"],n=function(b){function c(a,b,c,d,e){return(a+(b-a)*(d-c)/d)/e}var d=a().hour(),e=a().minute(),f=hexToRgb(b[d]),g=hexToRgb(b[(d+1)%24]);return new Color(c(f.r,g.r,e,60,255),c(f.g,g.g,e,60,255),c(f.b,g.b,e,60,255))},o=function(){return n(l)},p=function(){return n(m)},q="#104eb3",r="#1188f2",s="#0d73cc",t=[q,r,s],u=new Point(0,0),v=new Point(f/2,0),w=new Point(f,0),x=new Point(0,g/2),y=new Point(f/2,g/2),z=new Point(f,g/2),A=new Point(0,g),B=new Point(f/2,g),C=new Point(f,g),D="Lights synched with sunn",E=40,F="#ffffff",G=new Point(f/2,100),H=function(){var b=a().format("hh"),c=a().format("mm"),d=moment().format("s");return b+(d%2?":":" ")+c},I=80,J="#e18422",K=new Point(f/2,g/2),L=function(){return a().format("MMM Do, YYYY")},M=20,N="#e18422",O=new Point(f/2,g/2+30),P="Boulder Colorado",Q=30,R="#ffffff",S=new Point(f/2,g-45),T=new Point(60,80),U=.3,V=new Point(200,g-60),W=.1,X=40,Y=[f/2,g/2+100],Z=.1,$=z,_=50,ab=5,bb=new Point($.x-_,$.y),cb=new Point($.x,$.y),db=150,eb=20,fb=3,gb=20,hb=10,ib=1,jb=new Point(z);return{currentMoment:a,sunriseHour:b,sunriseMinute:c,sunsetHour:d,sunsetMinute:e,width:f,height:g,sunLayers:h,radius:i,center:k,increment:j,sunColor:o,lightColor:p,skyColors:t,topLeft:u,topMiddle:v,topRight:w,middleLeft:x,middleMiddle:y,middleRight:z,bottomLeft:A,bottomMiddle:B,bottomRight:C,titleText:D,titlePosition:G,titleSize:E,titleColor:F,clockText:H,clockSize:I,clockColor:J,clockPosition:K,dateText:L,dateSize:M,dateColor:N,datePosition:O,cityText:P,citySize:Q,cityColor:R,cityPosition:S,iconPosition:T,iconScale:U,globePosition:V,globeScale:W,globeRadius:X,campfirePosition:Y,campfireScale:Z,markF:bb,markT:cb,markWidth:ab,rulerZeroPosition:jb,rulerSpacing:db,rulerWidth:fb,rulerLength:eb,rulerTextSize:gb,rulerTextSpacing:hb,rulerDirection:ib}}();$(function(){function a(){var a=SUNN.currentMoment().hour()%12;this.visible=this.h-1<a?!1:!0}var b=$("canvas")[0];paper.setup(b),Path.Rectangle({point:[0,0],size:[SUNN.width,SUNN.height],fillColor:{gradient:{stops:[["#162883",0],["#1983db",.5]]},origin:[SUNN.width/2,0],destination:[SUNN.width/2,SUNN.height]}});var c=new Path.Rectangle({point:SUNN.middleLeft,size:[SUNN.width,-100],fillColor:{gradient:{stops:[["#000000",0],[new Color(0,0,1,0),1]]},origin:[SUNN.width/2,SUNN.height/2],destination:[SUNN.width/2,SUNN.height/2-100]}});c.offset=0;var d=new Path.Rectangle({point:SUNN.middleLeft,size:[SUNN.width,-100],fillColor:{gradient:{stops:[["#000000",0],[new Color(0,0,1,0),1]]},origin:[SUNN.width/2,SUNN.height/2],destination:[SUNN.width/2,SUNN.height/2-100]}});d.offset=0;var e=new Path.Circle({center:SUNN.center,radius:SUNN.radius,fillColor:SUNN.sunColor(),onFrame:function(){this.fillColor=SUNN.sunColor()}}),f=new Path.Rectangle({point:SUNN.middleLeft,size:[SUNN.width,2*SUNN.height],strokeColor:"black",strokeWidth:SUNN.markWidth,fillColor:"black"});f.offset=0;var g=new Path.Rectangle({point:SUNN.middleLeft,size:[SUNN.width,2*SUNN.height],strokeColor:"black",strokeWidth:SUNN.markWidth,fillColor:"black"});g.offset=0,new Path.Line({from:SUNN.markF,to:SUNN.markT,strokeColor:"white",strokeWidth:SUNN.markWidth,strokeCap:"round"});for(var h=new Group,i=new Group,j=0;12>=j;j++){var k=new Path.Line({from:new Point(SUNN.rulerZeroPosition.x-SUNN.rulerLength,SUNN.rulerZeroPosition.y+j*SUNN.rulerDirection*SUNN.rulerSpacing),to:new Point(SUNN.rulerZeroPosition.x,SUNN.rulerZeroPosition.y+j*SUNN.rulerDirection*SUNN.rulerSpacing),strokeColor:"white",strokeWidth:SUNN.rulerWidth,strokeCap:"square"}),l=new PointText({point:new Point(SUNN.rulerZeroPosition.x-SUNN.rulerLength-SUNN.rulerTextSpacing,SUNN.rulerZeroPosition.y+j*SUNN.rulerDirection*SUNN.rulerSpacing+7),content:j+"",justification:"right",fillColor:"white",fontSize:SUNN.rulerTextSize});h.addChild(k),h.addChild(l);var m=new Path.Line({from:new Point(SUNN.rulerZeroPosition.x-SUNN.rulerLength,SUNN.rulerZeroPosition.y-j*SUNN.rulerDirection*SUNN.rulerSpacing),to:new Point(SUNN.rulerZeroPosition.x,SUNN.rulerZeroPosition.y-j*SUNN.rulerDirection*SUNN.rulerSpacing),strokeColor:"white",strokeWidth:SUNN.rulerWidth,strokeCap:"square"}),n=new PointText({point:new Point(SUNN.rulerZeroPosition.x-SUNN.rulerLength-SUNN.rulerTextSpacing,SUNN.rulerZeroPosition.y-j*SUNN.rulerDirection*SUNN.rulerSpacing+7),content:j+"",justification:"right",fillColor:"white",fontSize:SUNN.rulerTextSize});i.addChild(m),i.addChild(n),k.h=j,m.h=j,l.h=j,n.h=j,k.onFrame=a,m.onFrame=a,l.onFrame=a,n.onFrame=a}h.offset=0,i.offset=0,h.onFrame=function(){h.translate(new Point(0,+h.offset)),h.offset=12*SUNN.rulerSpacing*(SUNN.currentMoment().minute()+SUNN.currentMoment().hour()%12*60)/720,h.translate(new Point(0,-h.offset))},i.onFrame=function(){i.translate(new Point(0,-i.offset)),i.offset=12*SUNN.rulerSpacing*(SUNN.currentMoment().minute()+SUNN.currentMoment().hour()%12*60)/720,i.translate(new Point(0,+i.offset))};var o=new Path.Circle({center:SUNN.center,radius:SUNN.radius+3*SUNN.increment,fillColor:"#bf1a22",opacity:1}),p=new Path.Circle({center:SUNN.center,radius:SUNN.radius+2*SUNN.increment,fillColor:"#ed6725",opacity:1}),q=new Path.Circle({center:SUNN.center,radius:SUNN.radius+SUNN.increment,fillColor:"#fbcf28",opacity:1}),r=new Path.Circle({center:SUNN.center,radius:SUNN.radius,fillColor:"black",opacity:1}),s=new Raster({source:"https://cloud.githubusercontent.com/assets/1858099/4113110/87d74662-3244-11e4-86df-c2f2ce42d585.png",position:SUNN.campfirePosition}).scale(SUNN.campfireScale),t=new Group([o,p,q,r,s]);new PointText({point:SUNN.clockPosition,content:SUNN.clockText(),fillColor:SUNN.clockColor,justification:"center",fontFamily:"arial,helvetica",fontSize:SUNN.clockSize,onFrame:function(){this.content=SUNN.clockText()}}),new PointText({point:SUNN.datePosition,content:SUNN.dateText(),fillColor:SUNN.dateColor,justification:"center",fontFamily:"arial,helvetica",fontSize:SUNN.dateSize,onFrame:function(){this.content=SUNN.dateText()}}),new Raster({source:"https://cloud.githubusercontent.com/assets/1858099/3948391/b321a62e-26a4-11e4-98a0-530fe1c5de09.png",position:SUNN.iconPosition}).scale(SUNN.iconScale),new PointText({point:SUNN.titlePosition,content:SUNN.titleText,fillColor:SUNN.titleColor,justification:"center",fontFamily:"arial,helvetica",fontSize:SUNN.titleSize}),new Path.Circle({radius:SUNN.globeRadius,center:SUNN.globePosition,fillColor:"white",opacity:.5}),new PointText({point:SUNN.cityPosition,content:SUNN.cityText,fillColor:SUNN.cityColor,justification:"center",fontFamily:"arial,helvetica",fontSize:SUNN.citySize}),new Raster({source:"https://cloud.githubusercontent.com/assets/1858099/3948392/b56e30e6-26a4-11e4-9bcd-7f35cf3e3755.png",position:SUNN.globePosition,opacity:.5}).scale(SUNN.globeScale),c.onFrame=function(){c.translate(new Point(0,-c.offset)),c.offset=12*SUNN.rulerSpacing*(SUNN.currentMoment().minute()-SUNN.sunriseMinute+60*(SUNN.currentMoment().hour()%12-SUNN.sunriseHour))/720,c.translate(new Point(0,+c.offset))},d.onFrame=function(){d.translate(new Point(0,+d.offset)),d.offset=12*SUNN.rulerSpacing*(SUNN.currentMoment().minute()-SUNN.sunsetMinute+60*(SUNN.currentMoment().hour()%12-SUNN.sunsetHour))/720,d.translate(new Point(0,-d.offset))},f.onFrame=function(){f.translate(new Point(0,-f.offset)),f.offset=12*SUNN.rulerSpacing*(SUNN.currentMoment().minute()-SUNN.sunriseMinute+60*(SUNN.currentMoment().hour()%12-SUNN.sunriseHour))/720,f.translate(new Point(0,+f.offset))},g.onFrame=function(){g.translate(new Point(0,+g.offset)),g.offset=12*SUNN.rulerSpacing*(SUNN.currentMoment().minute()-SUNN.sunsetMinute+60*(SUNN.currentMoment().hour()%12-SUNN.sunsetHour))/720,g.translate(new Point(0,-g.offset))},view.onFrame=function(a){tick=a.count,function(){if(tick%30===0){var a=new Path.Circle({center:SUNN.center,radius:SUNN.radius,fillColor:SUNN.lightColor(),opacity:1,onFrame:function(){this.scale(1.003),this.life--,this.opacity=this.life/100,0===this.life&&this.remove()}});a.life=100,a.insertBelow(e)}}();var b=SUNN.currentMoment().hour();12>b?(h.visible=!1,i.visible=!0,c.visible=!0,f.visible=!0,d.visible=!1,g.visible=!1):(i.visible=!1,h.visible=!0,c.visible=!1,f.visible=!1,d.visible=!0,g.visible=!0),t.visible=b<SUNN.sunriseHour||b>12+SUNN.sunsetHour?!0:!1}});