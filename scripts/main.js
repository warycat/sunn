function hexToRgb(a){var b=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(a);return b?{r:parseInt(b[1],16),g:parseInt(b[2],16),b:parseInt(b[3],16)}:null}function getParameterByName(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var b=new RegExp("[\\?&]"+a+"=([^&#]*)"),c=b.exec(location.search);return null===c?"":decodeURIComponent(c[1].replace(/\+/g," "))}Modernizr.addTest("iphone",function(){return!!navigator.userAgent.match(/iPhone/i)}),paper.install(window);var tick=0,_width=$(window).width(),_height=$(window).height(),SUNN=function(){var a=function(){return moment().add(50*tick,"second")},b=6,c=28,d=7,e=18,f=function(){return _width},g=function(){return _height},h=function(){return new Point(_width,_height)},i=4,j=Modernizr.iphone?75:150,k=Modernizr.iphone?5:10,l=new Point(f()/2,g()/2),m=["#ff0000","#ff2200","#ff4400","#ff6600","#ff8800","#ffaa00","#ffcc00","#ffee00","#ffff22","#ffff44","#ffff66","#ffffff","#ffffff","#ffffff","#ffffff","#ffff22","#ffee00","#ffcc00","#ffaa00","#ff8800","#ff6600","#ff4400","#ff2200","#ff0000"],n=["#ff0000","#ff2200","#ff4400","#ff6600","#ff8800","#ffaa00","#ffcc00","#ffee00","#ffff22","#ffff44","#ffff66","#ffffff","#ffffff","#ffffff","#ffffff","#ffff22","#ffee00","#ffcc00","#ffaa00","#ff8800","#ff6600","#ff4400","#ff2200","#ff0000"],o=function(b){function c(a,b,c,d,e){return(a+(b-a)*(d-c)/d)/e}var d=a().hour(),e=a().minute(),f=hexToRgb(b[d]),g=hexToRgb(b[(d+1)%24]);return new Color(c(f.r,g.r,e,60,255),c(f.g,g.g,e,60,255),c(f.b,g.b,e,60,255))},p=function(){return o(m)},q=function(){return o(n)},r="#104eb3",s="#1188f2",t="#0d73cc",u=[r,s,t],v=function(){return new Point(0,0)},w=function(){return new Point(f()/2,0)},x=function(){return new Point(f(),0)},y=function(){return new Point(0,g()/2)},z=function(){return new Point(f()/2,g()/2)},A=function(){return new Point(f(),g()/2)},B=function(){return new Point(0,g())},C=function(){return new Point(f()/2,g())},D=function(){return new Point(f(),g())},E="Lights synched with sunn",F=Modernizr.iphone?16:40,G="#ffffff",H=new Point(f()/2,Modernizr.iphone?50:100),I=function(){var b=a().format("hh"),c=a().format("mm"),d=moment().format("s");return b+(d%2?":":" ")+c},J=Modernizr.iphone?40:80,K="#e18422",L=new Point(f()/2,g()/2),M=function(){return a().format("MMM Do, YYYY")},N=Modernizr.iphone?10:20,O="#e18422",P=new Point(f()/2,g()/2+(Modernizr.iphone?15:30)),Q="Boulder Colorado",R=Modernizr.iphone?15:30,S="#ffffff",T=new Point(f()/2,g()-(Modernizr.iphone?25:45)),U=new Point(Modernizr.iphone?30:60,Modernizr.iphone?40:80),V=Modernizr.iphone?.15:.3,W=new Point(f()/2-(Modernizr.iphone?100:200),g()-(Modernizr.iphone?30:60)),X=Modernizr.iphone?.05:.1,Y=Modernizr.iphone?20:40,Z=[f()/2,g()/2+(Modernizr.iphone?50:100)],$=Modernizr.iphone?.05:.1,_=A(),ab=Modernizr.iphone?25:50,bb=Modernizr.iphone?2:5,cb=new Point(_.x-ab,_.y),db=new Point(_.x,_.y),eb=Modernizr.iphone?75:150,fb=Modernizr.iphone?10:20,gb=Modernizr.iphone?2:3,hb=Modernizr.iphone?12:20,ib=Modernizr.iphone?5:10,jb=1,kb=new Point(A());return{currentMoment:a,sunriseHour:b,sunriseMinute:c,sunsetHour:d,sunsetMinute:e,width:f,height:g,size:h,sunLayers:i,radius:j,center:l,increment:k,sunColor:p,lightColor:q,skyColors:u,topLeft:v,topMiddle:w,topRight:x,middleLeft:y,middleMiddle:z,middleRight:A,bottomLeft:B,bottomMiddle:C,bottomRight:D,titleText:E,titlePosition:H,titleSize:F,titleColor:G,clockText:I,clockSize:J,clockColor:K,clockPosition:L,dateText:M,dateSize:N,dateColor:O,datePosition:P,cityText:Q,citySize:R,cityColor:S,cityPosition:T,iconPosition:U,iconScale:V,globePosition:W,globeScale:X,globeRadius:Y,campfirePosition:Z,campfireScale:$,markF:cb,markT:db,markWidth:bb,rulerZeroPosition:kb,rulerSpacing:eb,rulerWidth:gb,rulerLength:fb,rulerTextSize:hb,rulerTextSpacing:ib,rulerDirection:jb}}();$(function(){function a(){var a=SUNN.currentMoment().hour()%12;this.visible=this.h-1<a?!1:!0}$("<canvas resize></canvas>").appendTo($("body"));var b=$("canvas")[0];paper.setup(b),Path.Rectangle({point:[0,0],size:SUNN.size(),fillColor:{gradient:{stops:[["#162883",0],["#1983db",.5]]},origin:SUNN.topMiddle(),destination:SUNN.bottomMiddle()}}).onFrame=function(){this.size=SUNN.size()};var c=new Path.Rectangle({point:SUNN.middleLeft(),size:[SUNN.width(),-100],fillColor:{gradient:{stops:[["#000000",0],[new Color(0,0,1,0),1]]},origin:SUNN.middleMiddle(),destination:[SUNN.width()/2,SUNN.height()/2-100]}});c.offset=0;var d=new Path.Rectangle({point:SUNN.middleLeft(),size:[SUNN.width(),-100],fillColor:{gradient:{stops:[["#000000",0],[new Color(0,0,1,0),1]]},origin:SUNN.middleMiddle(),destination:[SUNN.width()/2,SUNN.height()/2-100]}});d.offset=0;var e=new Path.Circle({center:SUNN.middleMiddle(),radius:SUNN.radius,fillColor:SUNN.sunColor(),onFrame:function(){this.center=SUNN.middleMiddle(),this.fillColor=SUNN.sunColor()}}),f=new Path.Rectangle({point:SUNN.middleLeft(),size:[SUNN.width(),2*SUNN.height()],strokeColor:"black",strokeWidth:SUNN.markWidth,fillColor:"black"});f.offset=0;var g=new Path.Rectangle({point:SUNN.middleLeft(),size:[SUNN.width(),2*SUNN.height()],strokeColor:"black",strokeWidth:SUNN.markWidth,fillColor:"black"});g.offset=0,new Path.Line({from:SUNN.markF,to:SUNN.markT,strokeColor:"white",strokeWidth:SUNN.markWidth,strokeCap:"round"});for(var h=new Group,i=new Group,j=0;12>=j;j++){var k=new Path.Line({from:new Point(SUNN.rulerZeroPosition.x-SUNN.rulerLength,SUNN.rulerZeroPosition.y+j*SUNN.rulerDirection*SUNN.rulerSpacing),to:new Point(SUNN.rulerZeroPosition.x,SUNN.rulerZeroPosition.y+j*SUNN.rulerDirection*SUNN.rulerSpacing),strokeColor:"white",strokeWidth:SUNN.rulerWidth,strokeCap:"square"}),l=new PointText({point:new Point(SUNN.rulerZeroPosition.x-SUNN.rulerLength-SUNN.rulerTextSpacing,SUNN.rulerZeroPosition.y+j*SUNN.rulerDirection*SUNN.rulerSpacing+7),content:j+"",justification:"right",fillColor:"white",fontSize:SUNN.rulerTextSize});h.addChild(k),h.addChild(l);var m=new Path.Line({from:new Point(SUNN.rulerZeroPosition.x-SUNN.rulerLength,SUNN.rulerZeroPosition.y-j*SUNN.rulerDirection*SUNN.rulerSpacing),to:new Point(SUNN.rulerZeroPosition.x,SUNN.rulerZeroPosition.y-j*SUNN.rulerDirection*SUNN.rulerSpacing),strokeColor:"white",strokeWidth:SUNN.rulerWidth,strokeCap:"square"}),n=new PointText({point:new Point(SUNN.rulerZeroPosition.x-SUNN.rulerLength-SUNN.rulerTextSpacing,SUNN.rulerZeroPosition.y-j*SUNN.rulerDirection*SUNN.rulerSpacing+7),content:j+"",justification:"right",fillColor:"white",fontSize:SUNN.rulerTextSize});i.addChild(m),i.addChild(n),k.h=j,m.h=j,l.h=j,n.h=j,k.onFrame=a,m.onFrame=a,l.onFrame=a,n.onFrame=a}h.offset=0,i.offset=0,h.onFrame=function(){h.translate(new Point(0,+h.offset)),h.offset=12*SUNN.rulerSpacing*(SUNN.currentMoment().minute()+SUNN.currentMoment().hour()%12*60)/720,h.translate(new Point(0,-h.offset))},i.onFrame=function(){i.translate(new Point(0,-i.offset)),i.offset=12*SUNN.rulerSpacing*(SUNN.currentMoment().minute()+SUNN.currentMoment().hour()%12*60)/720,i.translate(new Point(0,+i.offset))};var o=new Path.Circle({center:SUNN.middleMiddle(),radius:SUNN.radius+3*SUNN.increment,fillColor:"#bf1a22",opacity:1}),p=new Path.Circle({center:SUNN.middleMiddle(),radius:SUNN.radius+2*SUNN.increment,fillColor:"#ed6725",opacity:1}),q=new Path.Circle({center:SUNN.middleMiddle(),radius:SUNN.radius+SUNN.increment,fillColor:"#fbcf28",opacity:1}),r=new Path.Circle({center:SUNN.middleMiddle(),radius:SUNN.radius,fillColor:"black",opacity:1}),s=new Raster({source:"https://cloud.githubusercontent.com/assets/1858099/4113110/87d74662-3244-11e4-86df-c2f2ce42d585.png",position:SUNN.campfirePosition}).scale(SUNN.campfireScale),t=new Group([o,p,q,r,s]);new PointText({point:SUNN.clockPosition,content:SUNN.clockText(),fillColor:SUNN.clockColor,justification:"center",fontFamily:"arial,helvetica",fontSize:SUNN.clockSize,onFrame:function(){this.content=SUNN.clockText()}}),new PointText({point:SUNN.datePosition,content:SUNN.dateText(),fillColor:SUNN.dateColor,justification:"center",fontFamily:"arial,helvetica",fontSize:SUNN.dateSize,onFrame:function(){this.content=SUNN.dateText()}}),new Raster({source:"https://cloud.githubusercontent.com/assets/1858099/3948391/b321a62e-26a4-11e4-98a0-530fe1c5de09.png",position:SUNN.iconPosition}).scale(SUNN.iconScale),new PointText({point:SUNN.titlePosition,content:SUNN.titleText,fillColor:SUNN.titleColor,justification:"center",fontFamily:"arial,helvetica",fontSize:SUNN.titleSize}),new Path.Circle({radius:SUNN.globeRadius,center:SUNN.globePosition,fillColor:"white",opacity:.5}),new PointText({point:SUNN.cityPosition,content:SUNN.cityText,fillColor:SUNN.cityColor,justification:"center",fontFamily:"arial,helvetica",fontSize:SUNN.citySize}),new Raster({source:"https://cloud.githubusercontent.com/assets/1858099/3948392/b56e30e6-26a4-11e4-9bcd-7f35cf3e3755.png",position:SUNN.globePosition,opacity:.5}).scale(SUNN.globeScale),c.onFrame=function(){this.point=SUNN.middleLeft(),this.size=[SUNN.width(),-100],c.translate(new Point(0,-c.offset)),c.offset=12*SUNN.rulerSpacing*(SUNN.currentMoment().minute()-SUNN.sunriseMinute+60*(SUNN.currentMoment().hour()%12-SUNN.sunriseHour))/720,c.translate(new Point(0,+c.offset))},d.onFrame=function(){this.point=SUNN.middleLeft(),this.size=[SUNN.width(),-100],d.translate(new Point(0,+d.offset)),d.offset=12*SUNN.rulerSpacing*(SUNN.currentMoment().minute()-SUNN.sunsetMinute+60*(SUNN.currentMoment().hour()%12-SUNN.sunsetHour))/720,d.translate(new Point(0,-d.offset))},f.onFrame=function(){this.point=SUNN.middleLeft(),this.size=[SUNN.width(),2*SUNN.height()],f.translate(new Point(0,-f.offset)),f.offset=12*SUNN.rulerSpacing*(SUNN.currentMoment().minute()-SUNN.sunriseMinute+60*(SUNN.currentMoment().hour()%12-SUNN.sunriseHour))/720,f.translate(new Point(0,+f.offset))},g.onFrame=function(){this.point=SUNN.middleLeft(),this.size=[SUNN.width(),2*SUNN.height()],g.translate(new Point(0,+g.offset)),g.offset=12*SUNN.rulerSpacing*(SUNN.currentMoment().minute()-SUNN.sunsetMinute+60*(SUNN.currentMoment().hour()%12-SUNN.sunsetHour))/720,g.translate(new Point(0,-g.offset))},view.onFrame=function(a){tick=a.count,function(){if(tick%30===0){var a=new Path.Circle({center:SUNN.center,radius:SUNN.radius,fillColor:SUNN.lightColor(),opacity:1,onFrame:function(){this.scale(1.003),this.life--,this.opacity=this.life/100,0===this.life&&this.remove()}});a.life=100,a.insertBelow(e)}}();var b=SUNN.currentMoment().hour();12>b?(h.visible=!1,i.visible=!0,c.visible=!0,f.visible=!0,d.visible=!1,g.visible=!1):(i.visible=!1,h.visible=!0,c.visible=!1,f.visible=!1,d.visible=!0,g.visible=!0),t.visible=b<SUNN.sunriseHour||b>12+SUNN.sunsetHour?!0:!1}});var ip=getParameterByName("ip");console.log(ip);